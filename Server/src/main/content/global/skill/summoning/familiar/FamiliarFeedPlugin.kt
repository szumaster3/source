package content.global.skill.summoning.familiar

import content.global.skill.summoning.pet.Pet
import core.game.interaction.NodeUsageEvent
import core.game.interaction.UseWithHandler
import core.plugin.Initializable
import core.plugin.Plugin
import shared.consts.Items
import shared.consts.NPCs

/**
 * The familiar feed plugin.
 */
@Initializable
class FamiliarFeedPlugin : UseWithHandler(
    Items.RAW_BASS_363,
    Items.RAW_COD_341,
    Items.RAW_HERRING_345,
    Items.RAW_LOBSTER_377,
    Items.RAW_MACKEREL_353,
    Items.RAW_MANTA_RAY_389,
    Items.RAW_MONKFISH_7944,
    Items.RAW_PIKE_349,
    Items.RAW_SALMON_331,
    Items.RAW_SARDINE_327,
    Items.RAW_SEA_TURTLE_395,
    Items.RAW_SHARK_383,
    Items.RAW_SHRIMPS_317,
    Items.RAW_SWORDFISH_371,
    Items.RAW_TROUT_335,
    Items.RAW_TUNA_359,
    Items.BUCKET_OF_MILK_1927,
    Items.RAW_ANCHOVIES_321,
    Items.RAW_BEEF_2132,
    Items.RAW_RAT_MEAT_2134,
    Items.RAW_BEAR_MEAT_2136,
    Items.RAW_CHICKEN_2138,
    Items.RAW_YAK_MEAT_10816,
    Items.RAW_BEAST_MEAT_9986,
    Items.RAW_BIRD_MEAT_9978,
    Items.BONES_526,
    Items.LEATHER_GLOVES_1059,
    Items.LIMPWURT_ROOT_225,
    Items.EYE_OF_NEWT_221,
    Items.ASHES_592,
    Items.FLIES_12125,
    Items.BEETLE_BITS_12127,
    Items.FISHING_BAIT_313,
    Items.GROUND_FISHING_BAIT_12129,
    Items.MORT_MYRE_FUNGUS_2970,
    Items.CHOCOLATEY_MILK_1977,
    Items.NUTS_12130,
    Items.ROCK_FRAGMENTS_13379,
    Items.BANANA_1963,
    Items.ANCHOVIES_319,
    Items.BASS_365,
    Items.COD_339,
    Items.HERRING_347,
    Items.LOBSTER_379,
    Items.MACKEREL_355,
    Items.MANTA_RAY_391,
    Items.MONKFISH_7946,
    Items.PIKE_351,
    Items.SALMON_329,
    Items.SARDINE_325,
    Items.SEA_TURTLE_397,
    Items.SHARK_385,
    Items.SHRIMPS_315,
    Items.SWORDFISH_373,
    Items.TROUT_333,
    Items.TUNA_361
) {

    @Throws(Throwable::class)
    override fun newInstance(arg: Any?): Plugin<Any> {
        val ids = intArrayOf(
            NPCs.KITTEN_761,
            NPCs.KITTEN_762,
            NPCs.KITTEN_763,
            NPCs.KITTEN_764,
            NPCs.KITTEN_765,
            NPCs.KITTEN_766,
            NPCs.HELL_KITTEN_3505,
            NPCs.CLOCKWORK_CAT_3598,
            NPCs.BULLDOG_PUPPY_6969,
            NPCs.BULLDOG_PUPPY_7259,
            NPCs.BULLDOG_PUPPY_7260,
            NPCs.DALMATIAN_PUPPY_6964,
            NPCs.DALMATIAN_PUPPY_7249,
            NPCs.DALMATIAN_PUPPY_7251,
            NPCs.GREYHOUND_PUPPY_6960,
            NPCs.GREYHOUND_PUPPY_7241,
            NPCs.GREYHOUND_PUPPY_7243,
            NPCs.LABRADOR_PUPPY_6962,
            NPCs.LABRADOR_PUPPY_7245,
            NPCs.LABRADOR_PUPPY_7247,
            NPCs.SHEEPDOG_PUPPY_6966,
            NPCs.SHEEPDOG_PUPPY_7253,
            NPCs.SHEEPDOG_PUPPY_7255,
            NPCs.TERRIER_PUPPY_6958,
            NPCs.TERRIER_PUPPY_7237,
            NPCs.TERRIER_PUPPY_7239,
            NPCs.BABY_GECKO_6915,
            NPCs.BABY_GECKO_7277,
            NPCs.BABY_GECKO_7278,
            NPCs.BABY_GECKO_7279,
            NPCs.BABY_GECKO_7280,
            NPCs.BABY_PLATYPUS_7018,
            NPCs.BABY_PLATYPUS_7019,
            NPCs.BABY_PLATYPUS_7020,
            NPCs.BABY_PENGUIN_6908,
            NPCs.BABY_PENGUIN_7313,
            NPCs.BABY_PENGUIN_7316,
            NPCs.BABY_GIANT_CRAB_6947,
            NPCs.BABY_GIANT_CRAB_7293,
            NPCs.BABY_GIANT_CRAB_7295,
            NPCs.BABY_GIANT_CRAB_7297,
            NPCs.BABY_GIANT_CRAB_7299,
            NPCs.RAVEN_CHICK_6911,
            NPCs.RAVEN_CHICK_7261,
            NPCs.RAVEN_CHICK_7263,
            NPCs.RAVEN_CHICK_7265,
            NPCs.RAVEN_CHICK_7267,
            NPCs.RAVEN_CHICK_7269,
            NPCs.BABY_SQUIRREL_6919,
            NPCs.BABY_SQUIRREL_7301,
            NPCs.BABY_SQUIRREL_7303,
            NPCs.BABY_SQUIRREL_7305,
            NPCs.BABY_SQUIRREL_7307,
            NPCs.SARADOMIN_CHICK_6949,
            NPCs.ZAMORAK_CHICK_6952,
            NPCs.GUTHIX_CHICK_6955,
            NPCs.BABY_RACCOON_6913,
            NPCs.BABY_RACCOON_7271,
            NPCs.BABY_RACCOON_7273,
            NPCs.VULTURE_CHICK_6945,
            NPCs.VULTURE_CHICK_7319,
            NPCs.VULTURE_CHICK_7321,
            NPCs.VULTURE_CHICK_7323,
            NPCs.VULTURE_CHICK_7325,
            NPCs.VULTURE_CHICK_7327,
            NPCs.BABY_CHAMELEON_6922,
            NPCs.BABY_MONKEY_6942,
            NPCs.BABY_MONKEY_7210,
            NPCs.BABY_MONKEY_7212,
            NPCs.BABY_MONKEY_7214,
            NPCs.BABY_MONKEY_7216,
            NPCs.BABY_MONKEY_7218,
            NPCs.BABY_MONKEY_7220,
            NPCs.BABY_MONKEY_7222,
            NPCs.BABY_MONKEY_7224,
            NPCs.BABY_MONKEY_7226,
            NPCs.HATCHLING_DRAGON_6900,
            NPCs.HATCHLING_DRAGON_6902,
            NPCs.HATCHLING_DRAGON_6904,
            NPCs.HATCHLING_DRAGON_6906,
            NPCs.CAT_768,
            NPCs.CAT_769,
            NPCs.CAT_770,
            NPCs.CAT_771,
            NPCs.CAT_772,
            NPCs.CAT_773,
            NPCs.HELLCAT_3504,
            NPCs.CAT_8214,
            NPCs.BULLDOG_6968,
            NPCs.BULLDOG_7257,
            NPCs.BULLDOG_7258,
            NPCs.DALMATIAN_6965,
            NPCs.DALMATIAN_7250,
            NPCs.DALMATIAN_7252,
            NPCs.GREYHOUND_6961,
            NPCs.GREYHOUND_7242,
            NPCs.GREYHOUND_7244,
            NPCs.LABRADOR_6963,
            NPCs.LABRADOR_7246,
            NPCs.LABRADOR_7248,
            NPCs.SHEEPDOG_6967,
            NPCs.SHEEPDOG_7254,
            NPCs.SHEEPDOG_7256,
            NPCs.TERRIER_6894,
            NPCs.TERRIER_6959,
            NPCs.TERRIER_7238,
            NPCs.TERRIER_7240,
            NPCs.GECKO_6916,
            NPCs.GECKO_7281,
            NPCs.GECKO_7282,
            NPCs.GECKO_7283,
            NPCs.GECKO_7284,
            NPCs.PLATYPUS_7015,
            NPCs.PLATYPUS_7016,
            NPCs.PLATYPUS_7017,
            NPCs.PENGUIN_6909,
            NPCs.PENGUIN_7314,
            NPCs.PENGUIN_7317,
            NPCs.GIANT_CRAB_6948,
            NPCs.GIANT_CRAB_7294,
            NPCs.GIANT_CRAB_7296,
            NPCs.GIANT_CRAB_7298,
            NPCs.GIANT_CRAB_7300,
            NPCs.RAVEN_6912,
            NPCs.RAVEN_7262,
            NPCs.RAVEN_7264,
            NPCs.RAVEN_7266,
            NPCs.RAVEN_7268,
            NPCs.RAVEN_7270,
            NPCs.SQUIRREL_6920,
            NPCs.SQUIRREL_7302,
            NPCs.SQUIRREL_7304,
            NPCs.SQUIRREL_7306,
            NPCs.SQUIRREL_7308,
            NPCs.SARADOMIN_BIRD_6950,
            NPCs.ZAMORAK_BIRD_6953,
            NPCs.GUTHIX_BIRD_6956,
            NPCs.RACCOON_6914,
            NPCs.RACCOON_7272,
            NPCs.RACCOON_7274,
            NPCs.VULTURE_6946,
            NPCs.VULTURE_7320,
            NPCs.VULTURE_7322,
            NPCs.VULTURE_7324,
            NPCs.VULTURE_7326,
            NPCs.VULTURE_7328,
            NPCs.CHAMELEON_6923,
            NPCs.MONKEY_6943,
            NPCs.MONKEY_7211,
            NPCs.MONKEY_7213,
            NPCs.MONKEY_7215,
            NPCs.MONKEY_7217,
            NPCs.MONKEY_7219,
            NPCs.MONKEY_7221,
            NPCs.MONKEY_7223,
            NPCs.MONKEY_7225,
            NPCs.MONKEY_7227,
            NPCs.BABY_DRAGON_6901,
            NPCs.BABY_DRAGON_6903,
            NPCs.BABY_DRAGON_6905,
            NPCs.BABY_DRAGON_6907,
            NPCs.OVERGROWN_CAT_774,
            NPCs.OVERGROWN_CAT_775,
            NPCs.OVERGROWN_CAT_776,
            NPCs.OVERGROWN_CAT_777,
            NPCs.OVERGROWN_CAT_778,
            NPCs.OVERGROWN_CAT_779,
            NPCs.OVERGROWN_HELLCAT_3503,
            NPCs.OVERGROWN_CAT_8216,
            NPCs.SARADOMIN_OWL_6951,
            NPCs.ZAMORAK_HAWK_6954,
            NPCs.GUTHIX_RAPTOR_6957
        )
        for (i in ids) {
            addHandler(i, NPC_TYPE, this)
        }
        return this
    }

    override fun handle(event: NodeUsageEvent): Boolean {
        val f = event.usedWith as Familiar as? Pet ?: return false
        event.player.familiarManager.eat(event.usedItem.id, f)
        return true
    }
}
